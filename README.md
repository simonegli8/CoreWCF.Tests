# About CoreWCF.Test

[![Introduction Video](http://mqdefault.jpg)](https://youtube.com/live/dQghJYd2AEM)

This repository contains unit tests from the SolidCP control panel that runs web services in the project SolidCP.Server.
The web services in SolidCP.Server are still in the WSE3 style with asmx files. From those services, WCF services and
client proxies are generated by a Roslyn SourceGenerator from SolidCP.Build. Those generated services and client
proxies are located in SolidCP.Server/WebServices. SolidCP.Server can be run under NET Framework 4.8 by running
the directory in IIS, and it can also run with NET 6 and Kestrel by running SolidCP.Server/bin/net.core/SolidCP.Server.exe.

SolidCP.Web.Services contains the basic creation of WCF Service endpoints for the generated services, for NET Framework
and NET Core. The project SolidCP.Web.Services is therefore compiled against NET Framework 4.8 and NET 6. When
running on NET Framework 4.8 it uses the classes from System.ServiceModel, when running on NET 6 it uses CoreWCF.

SolidCP.Web.Clients contains the base class for the generated web proxy classes in SolidCP.Server/WebServices in
ClientBase.cs. Every proxy has a Url property that must be set to the Url of the server, and a Protocol property that sets the
proxy url to the corresponding url. The proxy base class automatically chooses the right url for the protocol.

The project SolidCP.Server.Tests contains a few unit tests, that call the web services in SolidCP.Server. Those unit tests
cause the bug in CoreWCF, where there is a NullReferenceException in CoreWCF.Channels.RequestDelegateHandler.HandleRequest.
Another bug is caused, when the Server is configured to also support plain http and net.tcp endpoints. Then the creation of the service endpoints
fails.
